<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Professional Profile - CV Builder</title>
    <link rel="icon" type="image/png" href="./assets/images/favicon.png">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/jwt-decode@3.1.2/build/jwt-decode.min.js"></script>

    <link rel="stylesheet" href="cv-profile-system.css">
</head>
<body>
    <header>
        <div class="container" style="display: flex; justify-content: space-between; align-items: center;">
            <h1>Professional Profile</h1>
            <button class="btn btn-danger" onclick="logout()" title="Logout">
                <i class="fas fa-sign-out-alt"></i> Logout
            </button>
        </div>
    </header>
 
    <div class="container">
             <!-- ATS Info Banner - Add this right after the nav element -->
<div class="ats-banner-container">
    <div class="ats-banner" id="atsBanner">
      <div class="ats-banner-teaser">
        <span class="ats-banner-icon">üìù</span>
        <span class="ats-banner-text">Boost your CV with our ATS optimization tips!</span>
        <span class="ats-banner-toggle">‚ñº</span>
      </div>
      <div class="ats-banner-content" id="atsBannerContent">
        <div class="ats-content-wrapper">
          <div class="ats-section">
            <h3>What is ATS Score?</h3>
            <p>ATS (Applicant Tracking System) is software used by employers to scan resumes for relevance. Our tool analyzes your CV to ensure it passes through these systems and reaches human recruiters.</p>
          </div>
          <div class="ats-section">
            <h3>CV Optimization Tips</h3>
            <ul>
              <li>Use industry-relevant keywords from the job description</li>
              <li>Keep formatting simple and consistent</li>
              <li>Include measurable achievements</li>
              <li>Tailor your CV for each application</li>
              <li>Use standard section headings</li>
            </ul>
          </div>
          <div class="ats-section">
            <h3>SkillSwap Benefits</h3>
            <p>Our platform helps you upgrade your skills, build an ATS-optimized CV, and generate professional designs that stand out to both automated systems and hiring managers.</p>
            <a href="./profile-system/cv-profile-system.html" class="ats-cta-button">Get Started Now</a>
          </div>
        </div>
      </div>
    </div>
  </div>
  

        <!-- Section 1 / 6 : PROFILE -->
        <div class="profile-header">
            <div class="profile-image">
                <img id="profilePic" alt="Profile Picture" onerror="this.onerror=null;this.src='default-profile.png';" title="Profile Picture">
                <input type="file" id="profilePicInput" accept="image/*" style="margin-top:10px;" title="Upload your profile picture">
                <button class="btn btn-info" id="uploadPicBtn" style="margin-top:5px;" title="Upload Picture">Upload Picture</button>
            </div>
            <div class="profile-info">
                <h2 id="userName">Loading...</h2>
                <p id="userEmail"><i class="fas fa-envelope"></i> Loading...</p>
                <p id="userPhone"><i class="fas fa-phone"></i> Loading...</p>
                <p id="userAddress"><i class="fas fa-map-marker-alt"></i> Loading...</p>
                <div class="social-links">
                    <a href="#" id="linkedinLink" target="_blank" title="LinkedIn Profile"><i class="fab fa-linkedin"></i></a>
                    <a href="#" id="githubLink" target="_blank" title="GitHub Profile"><i class="fab fa-github"></i></a>
                    <a href="#" id="portfolioLink" target="_blank" title="Portfolio Website"><i class="fas fa-globe"></i></a>
                </div>
                <button class="btn btn-warning" id="edit-profile-btn" onclick= openEditProfileModal() title="Edit Profile">
                    <i class="fas fa-user-edit"></i> Edit Profile
                </button>
                <div class="profile-actions">

                    <div class="action-buttons">
                        <button id="sendCVBtn" class="btn btn-primary">
                            <i class="fas fa-paper-plane"></i> Send CV via Email
                        </button>
                        <button id="downloadCVBtn" class="btn btn-secondary">
                            <i class="fas fa-download"></i> Download CV as PDF
                        </button>
                    </div>
                </div>
            </div>
        </div>
                <!-- Edit Profile Modal -->
                <div id="editProfileModal" class="modal">
                    <div class="modal-content">
                        <span class="close" onclick="closeEditProfileModal()">&times;</span>
                        <h2>Edit Profile</h2>
                        <form id="editProfileForm" >
                            <label for="editName">Name:</label>
                            <input type="text" id="editName" required><br><br>
                            <label for="editEmail">Email:</label>
                            <input type="email" id="editEmail" required><br><br>
                            <label for="editPhone">Phone:</label>
                            <input type="text" id="editPhone"><br><br>
                            <label for="editAddress">Address:</label>
                            <input type="text" id="editAddress"><br><br>
                            <label for="editBio">Bio:</label>
                            <textarea id="editBio"></textarea><br><br>
                            <label for="editLinkedinUrl">LinkedIn URL:</label>
                            <input type="url" id="editLinkedinUrl"><br><br>
                            <label for="editGithubUrl">GitHub URL:</label>
                            <input type="url" id="editGithubUrl"><br><br>
                            <label for="editPortfolioUrl">Portfolio URL:</label>
                            <input type="url" id="editPortfolioUrl"><br><br>
                            <button type="button" class="btn btn-primary" onclick="saveProfileChanges(event)">Save Changes</button>                        </form>
                    </div>
                </div>

        <div class="section" id="bioSection">
            <div class="section-title">
                <i class="fas fa-user"></i>
                <h3>About Me</h3>
            </div>
            <div id="userBio">
                <div class="empty-state">
                    <i class="fas fa-user-edit"></i>
                    <p>No bio information available</p>
                </div>
            </div>
        </div>
        
        <!-- Section 2 / 6 : EDUCATION -->
        <!-- Education Section -->
        <div class="section" id="educationSection">
            <div class="section-title" style="display: flex; align-items: center;">
                <i class="fas fa-graduation-cap"></i>
                <h3 style="margin-right: auto;">Education</h3>
                <button class="btn btn-success" onclick="openCreateEducationModal()"><i class="fas fa-plus"></i> Add Education</button>
            </div>
            <div id="educationContainer">
                <div class="empty-state">
                    <i class="fas fa-graduation-cap"></i>
                    <p>No education details added yet</p>
                </div>
            </div>
        </div>
        
        <!-- Create Education Modal -->
        <div id="createEducationModal" class="modal">
            <div class="modal-content">
                <span class="close" onclick="closeCreateEducationModal()">&times;</span>
                <h2>Add Education</h2>
                <form id="createEducationForm">
                    <label for="degree">Degree:</label>
                    <input type="text" id="degree" required><br><br>
                    <label for="fieldOfStudy">Field of Study:</label>
                    <input type="text" id="fieldOfStudy" required><br><br>
                    <label for="institution">Institution:</label>
                    <input type="text" id="institution" required><br><br>
                    <label for="startYear">Start Year:</label>
                    <input type="number" id="startYear" required><br><br>
                    <label for="endYear">End Year:</label>
                    <input type="number" id="endYear"><br><br>
                    <label for="educationDescription">Description:</label>
                    <textarea id="educationDescription"></textarea><br><br>
                    <button type="button" class="btn btn-primary" onclick="saveNewEducation()">Save</button>
                </form>
            </div>
        </div>
        
        <!-- Edit Education Modal -->
        <div id="editEducationModal" class="modal">
            <div class="modal-content">
                <span class="close" onclick="closeEditEducationModal()">&times;</span>
                <h2>Edit Education</h2>
                <form id="editEducationForm">
                    <input type="hidden" id="educationId">
                    <label for="editDegree">Degree:</label>
                    <input type="text" id="editDegree" required><br><br>
                    <label for="editFieldOfStudy">Field of Study:</label>
                    <input type="text" id="editFieldOfStudy" required><br><br>
                    <label for="editInstitution">Institution:</label>
                    <input type="text" id="editInstitution" required><br><br>
                    <label for="editStartYear">Start Year:</label>
                    <input type="number" id="editStartYear" required><br><br>
                    <label for="editEndYear">End Year:</label>
                    <input type="number" id="editEndYear"><br><br>
                    <label for="editEducationDescription">Description:</label>
                    <textarea id="editEducationDescription"></textarea><br><br>
                    <button type="button" class="btn btn-primary" onclick="saveEditedEducation()">Save Changes</button>
                </form>
            </div>
        </div>

        <!-- Section 3 / 6 : WORK EXPERIENCE -->
        <div class="section" id="experienceSection">
            <div class="section-title" style="display: flex; align-items: center;">
                <i class="fas fa-briefcase"></i>
                <h3 style="margin-right: auto;">Work Experience</h3>
                <button class="btn btn-success" onclick="openCreateExperienceModal()">
                    <i class="fas fa-plus"></i> Add Experience
                </button>
            </div>
            <div id="experienceContainer">
                <div class="empty-state">
                    <i class="fas fa-briefcase"></i>
                    <p>No work experience added yet</p>
                </div>
            </div>
        </div>

         <!-- Create Experience Modal -->
         <div id="createExperienceModal" class="modal">
            <div class="modal-content">
                <span class="close" onclick="closeCreateExperienceModal()">&times;</span>
                <h2>Add Experience</h2>
                <form id="createExperienceForm">
                    <label for="jobTitle">Job Title:</label>
                    <input type="text" id="jobTitle" required><br><br>
                    <label for="company">Company:</label>
                    <input type="text" id="company" required><br><br>
                    <label for="startDate">Start Date:</label>
                    <input type="date" id="startDate" required><br><br>
                    <label for="endDate">End Date:</label>
                    <input type="date" id="endDate"><br><br>
                    <label for="experienceDescription">Description:</label>
                    <textarea id="experienceDescription"></textarea><br><br>
                    <button type="button" class="btn btn-primary" onclick="saveNewExperience()">Save</button>
                </form>
            </div>
        </div>
        
        <!-- Edit Experience Modal -->
        <div id="editExperienceModal" class="modal">
            <div class="modal-content">
                <span class="close" onclick="closeEditExperienceModal()">&times;</span>
                <h2>Edit Experience</h2>
                <form id="editExperienceForm">
                    <input type="hidden" id="experienceId">
                    <label for="editJobTitle">Job Title:</label>
                    <input type="text" id="editJobTitle" required><br><br>
                    <label for="editCompany">Company:</label>
                    <input type="text" id="editCompany" required><br><br>
                    <label for="editStartDate">Start Date:</label>
                    <input type="date" id="editStartDate" required><br><br>
                    <label for="editEndDate">End Date:</label>
                    <input type="date" id="editEndDate"><br><br>
                    <label for="editExperienceDescription">Description:</label>
                    <textarea id="editExperienceDescription"></textarea><br><br>
                    <button type="button" class="btn btn-primary" onclick="saveEditedExperience()">Save Changes</button>
                </form>
            </div>
        </div>

                <!-- Section 4 / 6 : PROJECTS -->
                <div class="section" id="projectsSection">
                    <div class="section-title" style="display: flex; align-items: center;">
                        <i class="fas fa-project-diagram"></i>
                        <h3 style="margin-right: auto;">Projects</h3>
                        <button class="btn btn-success" onclick="openCreateProjectModal()">
                            <i class="fas fa-plus"></i> Add Project
                        </button>
                    </div>
                    <div id="projectsContainer">
                        <div class="empty-state">
                            <i class="fas fa-project-diagram"></i>
                            <p>No projects added yet</p>
                        </div>
                    </div>
                </div>
        
                <!-- Create Project Modal -->
                <div id="createProjectModal" class="modal">
                    <div class="modal-content">
                        <span class="close" onclick="closeCreateProjectModal()">&times;</span>
                        <h2>Add Project</h2>
                        <form id="createProjectForm">
                            <label for="title">Project Title:</label>
                            <input type="text" id="title" required><br><br>
                            <label for="description">Description:</label>
                            <textarea id="description"></textarea><br><br>
                            <label for="link">Project Link:</label>
                            <input type="url" id="link"><br><br>
                            <label for="projectStartDate">Start Date:</label>
                            <input type="date" id="projectStartDate" required><br><br>
                            <label for="projectEndDate">End Date:</label>
                            <input type="date" id="projectEndDate"><br><br>
                            <button type="button" class="btn btn-primary" onclick="saveNewProject()">Save</button>
                        </form>
                    </div>
                </div>
                
                <!-- Edit Project Modal -->
                <div id="editProjectModal" class="modal">
                    <div class="modal-content">
                        <span class="close" onclick="closeEditProjectModal()">&times;</span>
                        <h2>Edit Project</h2>
                        <form id="editProjectForm">
                            <input type="hidden" id="projectId">
                            <label for="editTitle">Project Title:</label>
                            <input type="text" id="editTitle" required><br><br>
                            <label for="editDescription">Description:</label>
                            <textarea id="editDescription"></textarea><br><br>
                            <label for="editLink">Project Link:</label>
                            <input type="url" id="editLink"><br><br>
                            <label for="editProjectStartDate">Start Date:</label>
                            <input type="date" id="editProjectStartDate" required><br><br>
                            <label for="editProjectEndDate">End Date:</label>
                            <input type="date" id="editProjectEndDate"><br><br>
                            <button type="button" class="btn btn-primary" onclick="saveEditedProject()">Save Changes</button>
                        </form>
                    </div>
                </div>
        

        <!-- Section 5 / 6 : CERTIFICATIONS -->
        <div class="section" id="certificationsSection">
            <div class="section-title" style="display: flex; align-items: center;">
                <i class="fas fa-certificate"></i>
                <h3 style="margin-right: auto;">Certifications</h3>
                <button class="btn btn-success" onclick="openCreateCertificationModal()">
                    <i class="fas fa-plus"></i> Add Certification
                </button>
            </div>
            <div id="certificationsContainer">
                <div class="empty-state">
                    <i class="fas fa-certificate"></i>
                    <p>No certifications added yet</p>
                </div>
            </div>
        </div>

        <!-- Create Certification Modal -->
        <div id="createCertificationModal" class="modal">
            <div class="modal-content">
                <span class="close" onclick="closeCreateCertificationModal()">&times;</span>
                <h2>Add Certification</h2>
                <form id="createCertificationForm">
                    <label for="name">Certification Name:</label>
                    <input type="text" id="name" required><br><br>
                    <label for="authority">Issuing Authority:</label>
                    <input type="text" id="authority"><br><br>
                    <label for="licenseNumber">License Number:</label>
                    <input type="text" id="licenseNumber"><br><br>
                    <label for="certificationStartDate">Start Date:</label>
                    <input type="date" id="certificationStartDate" required><br><br>
                    <label for="certificationEndDate">End Date:</label>
                    <input type="date" id="certificationEndDate"><br><br>
                    <label for="certificationDescription">Description:</label>
                    <textarea id="certificationDescription"></textarea><br><br>
                    <button type="button" class="btn btn-primary" onclick="saveNewCertification()">Save</button>
                </form>
            </div>
        </div>

        <!-- Edit Certification Modal -->
        <div id="editCertificationModal" class="modal">
            <div class="modal-content">
                <span class="close" onclick="closeEditCertificationModal()">&times;</span>
                <h2>Edit Certification</h2>
                <form id="editCertificationForm">
                    <input type="hidden" id="certificationId">
                    <label for="editCertificateName">Certification Name:</label>
                    <input type="text" id="editCertificateName" required><br><br>
                    <label for="editAuthority">Issuing Authority:</label>
                    <input type="text" id="editAuthority"><br><br>
                    <label for="editLicenseNumber">License Number:</label>
                    <input type="text" id="editLicenseNumber"><br><br>
                    <label for="editCertificationStartDate">Start Date:</label>
                    <input type="date" id="editCertificationStartDate" required><br><br>
                    <label for="editCertificationEndDate">End Date:</label>
                    <input type="date" id="editCertificationEndDate"><br><br>
                    <label for="editCertificationDescription">Description:</label>
                    <textarea id="editCertificationDescription"></textarea><br><br>
                    <button type="button" class="btn btn-primary" onclick="saveEditedCertification()">Save Changes</button>
                </form>
            </div>
        </div>
            
 
        <!-- Section 6 / 6 : SKILLS -->
        <div class="section" id="skillsSection">
            <div class="section-title" style="display: flex; align-items: center;">
                <i class="fas fa-tools"></i>
                <h3 style="margin-right: auto;">Skills</h3>
                <button class="btn btn-success" onclick="openCreateSkillModal()">
                    <i class="fas fa-plus"></i> Add Skill
                </button>
            </div>
            <div id="skillsContainer">
                <div class="empty-state">
                    <i class="fas fa-tools"></i>
                    <p>No skills added yet</p>
                </div>
            </div>
        </div>
        
        <!-- Create Skill Modal -->
        <div id="createSkillModal" class="modal">
            <div class="modal-content">
                <span class="close" onclick="closeCreateSkillModal()">&times;</span>
                <h2>Add Skill</h2>
                <form id="createSkillForm">
                    <label for="skillName">Skill Name:</label>
                    <input type="text" id="skillName" required><br><br>
                    <label for="skillType">Skill Type:</label>
                    <select id="skillType" required>
                        <option value="teach">Teach</option>
                        <option value="learn">Learn</option>
                    </select><br><br>
                    <label for="skillLevel">Skill Level:</label>
                    <select id="skillLevel" required>
                        <option value="Beginner">Beginner</option>
                        <option value="Intermediate">Intermediate</option>
                        <option value="Advanced">Advanced</option>
                    </select><br><br>
                    <button type="button" class="btn btn-primary" onclick="saveNewSkill()">Save</button>
                </form>
            </div>
        </div>
        
        <!-- Edit Skill Modal -->
        <div id="editSkillModal" class="modal">
            <div class="modal-content">
                <span class="close" onclick="closeEditSkillModal()">&times;</span>
                <h2>Edit Skill</h2>
                <form id="editSkillForm">
                    <input type="hidden" id="skillId">
                    <label for="editSkillName">Skill Name:</label>
                    <input type="text" id="editSkillName" required><br><br>
                    <label for="editSkillType">Skill Type:</label>
                    <select id="editSkillType" required>
                        <option value="teach">Teach</option>
                        <option value="learn">Learn</option>
                    </select><br><br>
                    <label for="editSkillLevel">Skill Level:</label>
                    <select id="editSkillLevel" required>
                        <option value="Beginner">Beginner</option>
                        <option value="Intermediate">Intermediate</option>
                        <option value="Advanced">Advanced</option>
                    </select><br><br>
                    <button type="button" class="btn btn-primary" onclick="saveEditedSkill()">Save Changes</button>
                </form>
            </div>
        </div>
            
    <footer>
        <div class="container">
            <p>&copy; 2025 CV Builder. All rights reserved.</p>
        </div>
    </footer>
    
<!-- Email Confirmation Modal -->
<div id="emailConfirmModal" class="modal" style="display: none; position: fixed; z-index: 1000; left: 0; top: 0; width: 100%; height: 100%; overflow: auto; background-color: rgba(0,0,0,0.4);">
    <div class="modal-content" style="background-color: #fefefe; margin: 15% auto; padding: 20px; border: 1px solid #888; width: 80%; max-width: 500px; border-radius: 5px;">
        <span class="close" onclick="closeEmailModal()" style="color: #aaa; float: right; font-size: 28px; font-weight: bold; cursor: pointer;">&times;</span>
        <h2>Send CV</h2>
        <p>Enter the email address where you'd like to send your CV:</p>
        <div class="form-group">
            <label for="emailInput">Email Address:</label>
            <input type="email" id="emailInput" class="form-control" placeholder="example@email.com">
        </div>
        <div class="form-group">
            <button onclick="sendCVToEmail()" class="btn btn-primary">Send</button>
            <button onclick="closeEmailModal()" class="btn btn-secondary">Cancel</button>
        </div>
    </div>
</div>

<!-- Loading Overlay -->
<div id="loadingOverlay" style="display: none; position: fixed; z-index: 1001; left: 0; top: 0; width: 100%; height: 100%; background-color: rgba(0,0,0,0.5); justify-content: center; align-items: center;">
    <div style="background-color: white; padding: 20px; border-radius: 5px; text-align: center;">
        <div class="loading-spinner" style="border: 5px solid #f3f3f3; border-top: 5px solid #3498db; border-radius: 50%; width: 50px; height: 50px; margin: 0 auto 10px auto;"></div>
        <p id="loadingMessage">Processing...</p>
    </div>
</div>

    <script src="cv-profile-system.js"></script>
    <script src="pdf-email.js"></script>


</body>
</html>